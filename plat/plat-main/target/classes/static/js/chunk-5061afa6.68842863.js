(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5061afa6"],{"14b2e":function(t,e,a){},"1a3a":function(t,e,a){"use strict";a("14b2e")},8282:function(t,e,a){"use strict";a("9778")},"82d77":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:18}},[a("a-card",{attrs:{bordered:!1}},[a("register-list",{ref:"registerList",on:{showCase:t.showCase,showMarker:t.amapView}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-card",{attrs:{bordered:!1}},[a("div",[a("div",{staticStyle:{width:"100%","max-height":"500px"},style:{height:t.getHeight},attrs:{id:"container"}})]),a("carousel-pic",{ref:"bigPic"})],1)],1)],1)},i=[],o=(a("2eeb"),a("c0a4")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"位置描述"}},[a("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.locationDesc,callback:function(e){t.$set(t.queryParam,"locationDesc",e)},expression:"queryParam.locationDesc"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"案件描述"}},[a("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.caseDesc,callback:function(e){t.$set(t.queryParam,"caseDesc",e)},expression:"queryParam.caseDesc"}})],1)],1),a("a-col",{attrs:{sm:8}},[a("a-button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)],1)],1)],1),a("a-table",{attrs:{"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},columns:t.columns,"data-source":t.data,rowKey:"id",pagination:{current:t.pagination.current,pageSize:t.pagination.pageSize,total:t.pagination.total,"show-size-changer":!0,"show-quick-jumper":!0,"show-total":function(t){return"共 "+t+" 条"}},customRow:t.showRow},on:{change:t.change},scopedSlots:t._u([{key:"serial",fn:function(e,n,i){return a("span",{},[t._v(" "+t._s(i+1)+" ")])}},{key:"action",fn:function(e,n){return[a("a",{on:{click:function(e){return t.confirmCase(n)}}},[t._v("立案")])]}}])}),a("ReportEdit",{attrs:{modalData:t.modalData},on:{handleModalEvent:t.handleModalEvent}})],1)},r=[],c=(a("fe59"),a("08ba"),a("6c6d")),l=a("d4f4"),u=a("1cfa"),d=a.n(u),p=a("850b"),h=a("2af9"),f=[{title:"序号",scopedSlots:{customRender:"serial"}},{title:"案件来源",dataIndex:"casesource",key:"casesource"},{title:"案件类型",dataIndex:"caseType",key:"caseType"},{title:"样本",dataIndex:"sampleName",key:"sampleName"},{title:"案件描述",dataIndex:"caseDesc",key:"caseDesc"},{title:"位置描述",dataIndex:"locationDesc",key:"locationDesc"},{title:"上报时间",dataIndex:"reporTime",key:"reporTime"},{title:"操作",key:"action",align:"center",scopedSlots:{customRender:"action"}}],m={components:{ReportEdit:p["a"],Ellipsis:h["f"]},mounted:function(){this.loadData()},data:function(){return{data:[],columns:f,selectedRowKeys:[],pagination:{current:1,pageSize:10,total:0},modalData:{},queryParam:{}}},methods:{loadData:function(){var t=this,e=this,a=Object(c["a"])({pageNo:this.pagination.current,pageSize:this.pagination.pageSize,status:1},this.queryParam);Object(l["b"])(d.a.stringify(a)).then((function(a){t.data=a.result.data,t.pagination.total=a.result.totalCount,t.data.forEach((function(t){t.weight=1,t.lnglat=[t.lng,t.lat]})),console.log("caseInfoCityList2:",t.data),setTimeout((function(){e.$emit("showMarker",e.data)}),500)})).catch((function(t){}))},showRow:function(t,e){var a=this;return{on:{click:function(){a.$emit("showCase",t)}}}},confirmCase:function(t){this.modalData={record:JSON.parse(JSON.stringify(t)),visible:!0,disabled:!1,title:"立案"}},handleModalEvent:function(t){this.loadData()},onSelectChange:function(t){this.selectedRowKeys=t},change:function(t,e,a){this.pagination=t,this.loadData()}}},g=m,w=a("c701"),y=Object(w["a"])(g,s,r,!1,null,null,null),v=y.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:t.divWidth,height:t.divHeight,visible:t.visible,footer:t.footer},on:{cancel:t.handleCancel}},[a("a-carousel",{ref:"mycarousel",attrs:{autoplay:"",arrows:""},scopedSlots:t._u([{key:"prevArrow",fn:function(t){return a("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px",zIndex:"1"}},[a("a-icon",{attrs:{type:"left-circle"}})],1)}},{key:"nextArrow",fn:function(t){return a("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px"}},[a("a-icon",{attrs:{type:"right-circle"}})],1)}}])},t._l(t.files,(function(e){return a("div",[a("img",{staticClass:"caseBigImg",style:{width:t.getWidth},attrs:{src:e.url}})])})),0)],1)},b=[],k={name:"CarouselPic",data:function(){return{visible:!1,footer:null,confirmLoading:!1,files:[],title:"原图",divHeight:500,divWidth:600}},computed:{getWidth:function(){return this.divWidth+"px"}},created:function(){this.divHeight=document.body.clientHeight,this.divWidth=document.body.clientWidth-50},methods:{loadData:function(t,e){this.footer=null,this.visible=!0,this.files=t,console.log("this.$refs.mycarousel:",this.$refs.mycarousel);var a=this;this.$nextTick((function(){a.$refs.mycarousel.goTo(e,!1)}))},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()}}},M=k,C=(a("1a3a"),Object(w["a"])(M,x,b,!1,null,"6b551707",null)),D=C.exports,S={components:{RegisterList:v,CarouselPic:D},name:"Register",data:function(){return{divHeight:500,count:0,map:null,points:[],cluster:null,infoWindow:null}},computed:{getHeight:function(){return this.divHeight=document.body.clientHeight-200,this.divHeight+"px"}},mounted:function(){var t=this;window.onresize=function(){document.body.clientHeight!==window.screen.height&&(t.divHeight=document.body.clientHeight-200)}},methods:{amapView:function(t){console.log("points",t),console.log("this.points",this.points);var e=this;this.map&&this.map.destroy(),this.map=new AMap.Map("container",{zoom:13,center:[118.76979,32.066336]});var a=this.map,n=(new AMap.Size(32,32),new AMap.Pixel(-16,-30),new AMap.Size(32,32),new AMap.Pixel(-16,-30),new AMap.Size(48,48),new AMap.Pixel(-24,-45),this.cluster);this.points&&a.remove(this.points),this.points=t;var i=60;this.count=t.length,a.plugin(["AMap.MarkerClusterer"],(function(){n=new AMap.MarkerClusterer(a,t,{gridSize:i,renderClusterMarker:e._renderClusterMarker,renderMarker:e._renderMarker}),e.cluster=n,a.setFitView()})),a.on("click",(function(){e.closeInfoWindow()})),setTimeout((function(){a.setFitView()}),1e3)},_renderClusterMarker:function(t){var e=this.count,a=Math.pow(t.count/e,1/18),n=document.createElement("div"),i=180-180*a,o="hsla("+i+",100%,40%,0.7)",s="hsla("+i+",100%,90%,1)",r="hsla("+i+",100%,40%,1)",c="hsla("+i+",100%,90%,1)";n.style.backgroundColor=o;var l=Math.round(30+20*Math.pow(t.count/e,.2));n.style.width=n.style.height=l+"px",n.style.border="solid 1px "+r,n.style.borderRadius=l/2+"px",n.style.boxShadow="0 0 5px "+c,n.innerHTML=t.count,n.style.lineHeight=l+"px",n.style.color=s,n.style.fontSize="14px",n.style.textAlign="center",t.marker.setOffset(new AMap.Pixel(-l/2,-l/2)),t.marker.setContent(n)},_renderMarker:function(t){var e=this,a='<div style="background-color: hsla(180, 100%, 50%, 0.3); height: 18px; width: 18px; border: 1px solid hsl(180, 100%, 40%); border-radius: 12px; box-shadow: hsl(180, 100%, 50%) 0px 0px 3px;"></div>',n=new AMap.Pixel(-9,-9);t.marker.setContent(a),t.marker.setOffset(n),t.marker.on("click",(function(a){var n=t.data[0];e.openInfoWindow([a.lnglat.getLng(),a.lnglat.getLat()],n)}))},openInfoWindow:function(t,e){console.log("record",e);var a=this,n='<div style="padding:7px 0px 0px 0px;"><h4>案件详情</h4>',i=[];e&&(n=n+"<p class='input-item'>案件来源 : "+(e.casesource?e.casesource:""),n=n+"    上报人 :"+(e.reportor?e.reportor:"")+"</p>",n=n+"<p class='input-item'>案件类型 : "+(e.casetype?e.casetype:""),n=n+"    上报时间 : "+(e.reporTime?e.reporTime:"")+"</p>",n=n+"<p class='input-item'>案件样本 : "+(e.sampleName?e.sampleName:"")+"</p><p class='input-item'>案件描述 : "+(e.caseDesc?e.caseDesc:"")+"</p><p class='input-item'>案件位置描述 : "+(e.locationDesc?e.locationDesc:"")+"</p>",n+="</div>");var s=JSON.parse(JSON.stringify(i));for(var r in s)s[r].url="/api"+s[r].url;var c=o["a"].extend({template:n,methods:{showCarousel:function(t){console.log(s),a.$refs.bigPic.loadData(s,t)}}}),l=(new c).$mount();console.log("component",l);var u=new AMap.InfoWindow({anchor:"top-center"});u.setContent(l.$el),u.open(this.map,t),this.infoWindow=u},closeInfoWindow:function(){this.infoWindow&&this.infoWindow.close()},showCase:function(t){console.log("Register:",t);var e=[t.lng,t.lat];this.openInfoWindow(e,t)}}},P=S,_=(a("8282"),Object(w["a"])(P,n,i,!1,null,null,null));e["default"]=_.exports},9778:function(t,e,a){}}]);