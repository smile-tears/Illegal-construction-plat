(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a011de0"],{"097f":function(e,t,a){"use strict";var s=a("d1a9"),r=a.n(s);r.a},2395:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.modalData.title,width:800,visible:e.modalData.visible,confirmLoading:e.confirmLoading,maskClosable:!1,destroyOnClose:!0},on:{cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{on:{click:e.handleCancel}},[e._v(" 取消 ")]),e.isView?e._e():a("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(" 提交 ")])],1),a("div",{staticClass:"caseDetailTitle"},[e._v("基础信息")]),a("a-card",{attrs:{bordered:!1}},[a("detail-list",{attrs:{col:2}},[a("detail-list-item",{attrs:{term:"案件编号"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.caseNo))]),a("detail-list-item",{attrs:{term:"案件来源"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.casesource))]),a("detail-list-item",{attrs:{term:"案件类型"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.caseType))]),a("detail-list-item",{attrs:{term:"所属网格"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.gridName))]),a("detail-list-item",{attrs:{term:"责任部门"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.managerDept))]),a("detail-list-item",{attrs:{term:"责任人"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.name))]),a("detail-list-item",{attrs:{term:"样本"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.sampleName))]),a("detail-list-item",{attrs:{term:"处置时限"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.limittimes))]),a("detail-list-item",{attrs:{term:"案件计数"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.casecount))]),a("detail-list-item",{attrs:{term:"上报人"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.reportor))]),a("detail-list-item",{attrs:{term:"联系方式"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.contract))]),a("detail-list-item",{attrs:{term:"上报时间"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.reporTime))]),a("detail-list-item",{attrs:{term:"标记"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.mark))])],1),a("detail-list",{attrs:{col:1}},[a("detail-list-item",{attrs:{term:"案件描述"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.caseDesc))]),a("detail-list-item",{attrs:{term:"位置描述"}},[e._v(e._s(e.modalData&&e.modalData.record&&e.modalData.record.locationDesc))])],1)],1),!e.isView&&this.modalData.seen?a("div",{staticClass:"caseDetailTitle"},[e._v("案件处置")]):e._e(),!e.isView&&this.modalData.seen?a("a-form",{attrs:{layout:e.formLayout,form:e.form}},[this.modalData&&this.modalData.selectTab&&2==this.modalData.selectTab.status?a("a-form-item",{attrs:{label:"主办人","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["suggest.sponsor",{rules:[{required:!0,message:"主办人必填！"}]}],expression:"['suggest.sponsor', { rules: [{ required: true, message: '主办人必填！' }] }]"}],staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.personTreeData,placeholder:"","tree-default-expand-all":""}})],1):e._e(),this.modalData&&this.modalData.selectTab&&2==this.modalData.selectTab.status?a("a-form-item",{attrs:{label:"协办人","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["suggest.coOrganizer",{}],expression:"['suggest.coOrganizer', {}]"}],staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.personTreeData,placeholder:"","tree-default-expand-all":""}})],1):e._e(),a("a-form-item",{staticStyle:{width:"735px"},attrs:{label:"处理","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["suggest.result",{rules:[{required:!0,message:"处理必填！"}]}],expression:"['suggest.result', { rules: [{ required: true, message: '处理必填！' }] }]"}],on:{change:e.changeResult}},e._l(e.modalData&&e.modalData.selectTab&&this.modalData.selectTab.options,(function(t,s){return a("a-select-option",{attrs:{value:""+t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),e.modalData&&e.modalData.selectTab&&4==this.modalData.selectTab.status&&5==this.suggest.result?a("a-form-item",{attrs:{label:"核查人","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["suggest.verifier",{rules:[{required:!0,message:"核查人必填！"}]}],expression:"['suggest.verifier', { rules: [{ required: true, message: '核查人必填！' }] }]"}],staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.personTreeData,placeholder:"","tree-default-expand-all":""}})],1):e._e(),8==this.suggest.result?a("a-form-item",{attrs:{label:"延期时间","label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["suggest.enddate",{rules:[{required:!0,message:"延期时间必填！"}]}],expression:"['suggest.enddate', { rules: [{ required: true, message: '延期时间必填！' }] }]"}],staticStyle:{width:"100%"},attrs:{"show-time":"",placeholder:"请输入延期时间"}})],1):e._e(),a("a-form-item",{staticStyle:{width:"735px"},attrs:{label:"留言内容","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["suggest.idea",{}],expression:"['suggest.idea', {}]"}],attrs:{type:"textarea"}})],1),a("a-form-item",{staticStyle:{width:"735px"},attrs:{label:"附件上传","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-upload",{attrs:{name:"file",action:"/api/upload",multiple:!0,"file-list":e.suggest.fileList,remove:e.handleRemove},on:{change:e.handleFileChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("附件上传 ")],1)],1)],1),a("a-form-item",{staticStyle:{width:"735px"},attrs:{label:"图片上传","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-upload",{attrs:{name:"avatar",action:"/api/upload-avatar",multiple:!0,"list-type":"picture-card","file-list":e.suggest.imageList,remove:e.handleRemove},on:{preview:e.handlePreview,change:e.handleImageChange}},[e.suggest.imageList.length<8?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handlePreviewCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)],1):e._e(),a("div",{staticClass:"caseDetailTitle"},[e._v("案件流程")]),a("a-card",{attrs:{bordered:!1}},[a("detail-list",{attrs:{col:1}},[a("a-timeline",e._l(this.requestLogs,(function(t,s){return a("a-timeline-item",{attrs:{color:"green"}},[a("p",[e._v("操作人："+e._s(t.operator))]),a("p",[e._v("操作步骤："+e._s(e.statusObj[t.status]))]),a("p",[e._v("操作意见："+e._s(t.idea))]),a("p",[e._v("操作时间："+e._s(t.operatetime))]),2==t.status?a("p",[e._v("主办人："+e._s(t.sponsor))]):e._e(),2==t.status?a("p",[e._v("协办人："+e._s(t.coOrganizer))]):e._e(),4==t.status?a("p",[e._v("核查人："+e._s(t.verifier))]):e._e(),8==t.result?a("p",[e._v("延期时间："+e._s(t.enddate))]):e._e(),a("p",[a("a-upload",{attrs:{name:"file",action:"/api/upload",multiple:!0,disabled:!0,"file-list":t.fileList,remove:e.handleRemove},on:{change:e.handleFileChange}})],1),a("p",[a("a-upload",{attrs:{name:"avatar",action:"/api/upload-avatar",multiple:!0,disabled:!0,"list-type":"picture-card","file-list":t.imageList,remove:e.handleRemove},on:{preview:e.handlePreview,change:e.handleImageChange}})],1)])})),1)],1)],1)],2)},r=[],i=(a("fe59"),a("e18c"),a("08ba"),a("b449"),a("5d83")),l=a("c16f"),o=a("0fea"),n=a("d4f4"),d=a("9452"),c=a("6d2e"),u=a.n(c),m=a("ba70"),p=a.n(m),g=a("fee9"),f=a.n(g),v=a("6117"),h=a.n(v),D=a("89cc"),b=a.n(D),w=a("4f57"),_=a("049a"),C=a("7922"),y=a("3fc3"),x={prefixCls:w["a"].string,color:w["a"].string,dot:w["a"].any,pending:w["a"].bool,position:w["a"].oneOf(["left","right",""]).def("")},L={name:"ATimelineItem",props:Object(_["s"])(x,{color:"blue",pending:!1}),inject:{configProvider:{default:function(){return y["a"]}}},render:function(){var e,t,a=arguments[0],s=Object(_["k"])(this),r=s.prefixCls,i=s.color,l=void 0===i?"":i,o=s.pending,n=this.configProvider.getPrefixCls,d=n("timeline",r),c=Object(_["g"])(this,"dot"),u=b()((e={},f()(e,d+"-item",!0),f()(e,d+"-item-pending",o),e)),m=b()((t={},f()(t,d+"-item-head",!0),f()(t,d+"-item-head-custom",c),f()(t,d+"-item-head-"+l,!0),t)),p={class:u,on:Object(_["j"])(this)};return a("li",p,[a("div",{class:d+"-item-tail"}),a("div",{class:m,style:{borderColor:/blue|red|green|gray/.test(l)?void 0:l}},[c]),a("div",{class:d+"-item-content"},[this.$slots["default"]])])}},O=a("6c99"),T={prefixCls:w["a"].string,pending:w["a"].any,pendingDot:w["a"].string,reverse:w["a"].bool,mode:w["a"].oneOf(["left","alternate","right",""])},j={name:"ATimeline",props:Object(_["s"])(T,{reverse:!1,mode:""}),inject:{configProvider:{default:function(){return y["a"]}}},render:function(){var e,t=arguments[0],a=Object(_["k"])(this),s=a.prefixCls,r=a.reverse,i=a.mode,l=h()(a,["prefixCls","reverse","mode"]),o=this.configProvider.getPrefixCls,n=o("timeline",s),d=Object(_["g"])(this,"pendingDot"),c=Object(_["g"])(this,"pending"),m="boolean"===typeof c?null:c,g=b()(n,(e={},f()(e,n+"-pending",!!c),f()(e,n+"-reverse",!!r),f()(e,n+"-"+i,!!i),e)),v=Object(_["c"])(this.$slots["default"]),D=c?t(L,{attrs:{pending:!!c}},[t("template",{slot:"dot"},[d||t(O["a"],{attrs:{type:"loading"}})]),m]):null,w=r?[D].concat(p()(v.reverse())):[].concat(p()(v),[D]),y=function(e,t){var a=Object(_["l"])(e);return"alternate"===i?"right"===a.position?n+"-item-right":"left"===a.position||t%2===0?n+"-item-left":n+"-item-right":"left"===i?n+"-item-left":"right"===i||"right"===a.position?n+"-item-right":""},x=w.filter((function(e){return!!e})),T=x.length,j=n+"-item-last",I=x.map((function(e,t){var a=t===T-2?j:"",s=t===T-1?j:"";return Object(C["a"])(e,{class:b()([!r&&c?a:s,y(e,t)])})})),k={props:u()({},l),class:g,on:Object(_["j"])(this)};return t("ul",k,[I])}},I=a("b913");j.Item=L,j.install=function(e){e.use(I["a"]),e.component(j.name,j),e.component(L.name,L)};var k=j,S=(a("624e"),a("1cfa")),q=a.n(S),V=a("de52"),P=a.n(V),R=l["a"].Item,F=d["a"].caseStatusObj;function N(e){return new Promise((function(t,a){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return t(s.result)},s.onerror=function(e){return a(e)}}))}var Y={components:{"a-timeline":k,"a-timeline-item":k.Item,DetailList:l["a"],DetailListItem:R},props:["modalData"],data:function(){return{labelCol:{span:6},wrapperCol:{span:18},isView:!1,formLayout:"inline",confirmLoading:!1,previewVisible:!1,previewImage:"",personTreeData:[],statusObj:[],requestLogs:[],imageList:[],fileList:[],suggest:{idea:"",result:"",fileList:[],imageList:[]}}},watch:{modalData:function(e){var t=this,a=this;this.form.resetFields(),!0===e.visible&&this.$nextTick((function(){if(console.log("this.modalData.selectTab",t.modalData.selectTab),t.modalData.record.mark=(0===t.modalData.record.importantCase?"重大案件":"")+"-"+(0===t.modalData.record.repeatCase?"重复案件":""),2==t.modalData.record.status&&(t.suggest.sponsor=t.modalData.record.reportorId,t.$nextTick((function(){t.form.setFieldsValue({suggest:{sponsor:t.modalData.record.reportorId}})}))),a.isView=!1,3==t.modalData.record.status||5==t.modalData.record.status){t.modalData.selectTab.options||(a.isView=!0);var e={id:t.modalData.record.requestLogId2,receivetime:P()().format("YYYY-MM-DD HH:mm:ss")};Object(n["j"])(e).then((function(t){console.log("caseInfoRequestLogCityPut",e)}))}var s={};t.modalData.record.id&&(s.caseid=t.modalData.record.id),Object(n["h"])(q.a.stringify(s)).then((function(e){var t=e.result.data;a.requestLogs=t,t&&t.length>0&&t.forEach((function(e){var t=e.files;e.fileList=[],e.imageList=[],t&&t.forEach((function(t){var a={uid:t.id,name:t.fileName,status:"done",url:"/api"+t.url,thumbUrl:"/api"+t.thumbUrl,response:{result:t}};0===t.fileType?e.fileList.push(a):e.imageList.push(a)}))}))})).catch((function(){}))}))}},beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){this.statusObj=F,this.getSubCompanyUserTree(),this.initData();var e=this;e.isView=!1,!this.modalData.record||3!=this.modalData.record.status&&5!=this.modalData.record.status||this.modalData.selectTab.options||(e.isView=!0)},methods:{initData:function(){this.suggest={idea:"",result:"",fileList:[],imageList:[]}},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,s){s.suggest.caseid=t.modalData.record.id,3!=e.modalData.record.status&&5!=e.modalData.record.status||(s.suggest.id=t.modalData.record.requestLogId2),s.suggest.status=t.modalData.selectTab.status,s.suggest.enddate&&(s.suggest.enddate=s.suggest.enddate.format("YYYY-MM-DD HH:mm:ss"));var r=[];t.suggest.fileList.forEach((function(e){e.response&&r.push(e.response.result)})),t.suggest.imageList.forEach((function(e){e.response&&r.push(e.response.result)})),s.suggest.files=r,Object(n["i"])(s.suggest).then((function(t){e.$emit("handleModalEvent",t),e.handleCancel()})).catch((function(){}))}))},getSubCompanyUserTree:function(){var e=this;Object(o["n"])().then((function(t){200===t.code&&(e.personTreeData=t.result)})).catch((function(){}))},handleCancel:function(){this.close(),this.initData()},close:function(){this.modalData.visible=!1},handlePreviewCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,N(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleImageChange:function(e){var t=e.fileList;this.suggest.imageList=t},handleFileChange:function(e){var t=e.fileList;this.suggest.fileList=t},handleRemove:function(e){var t=e.response.result.id;void 0!==t&&caseInfoFileCityDelete(q.a.stringify({id:t})).then((function(e){e.code})).catch((function(){}))},changeResult:function(e,t){var a=this;this.suggest.result=e,5==e&&(this.suggest.verifier=this.modalData.record.reportorId,this.$nextTick((function(){a.form.setFieldsValue({suggest:{verifier:a.modalData.record.reportorId}})})))}}},$=Y,H=(a("097f"),a("4023")),E=Object(H["a"])($,s,r,!1,null,"77d1f94a",null);t["a"]=E.exports},"624e":function(e,t,a){},9452:function(e,t,a){"use strict";var s={"待分派":{status:2,count:0,options:[{label:"分派",value:3},{label:"结案",value:10}]},"案件处置":{status:3,count:0,options:[{label:"申请结案",value:4},{label:"申请延期",value:8},{label:"申请回退",value:7}]},"处置反馈件":{status:4,count:0,options:[{label:"派遣核查",value:5},{label:"不同意结案【重新分派】",value:3},{label:"结案",value:10}]},"案件核查":{status:5,count:0,options:[{label:"申请结案",value:6},{label:"申请延期",value:8},{label:"申请回退",value:7}]},"核查反馈件":{status:6,count:0,options:[{label:"同意结案",value:10},{label:"退回",value:5}]},"申请回退":{status:7,count:0,options:[{label:"同意回退",value:2},{label:"不同意回退",value:"laststatus"}]},"申请延期":{status:8,count:0,options:[{label:"同意延期",value:"laststatus1"},{label:"不同意延期",value:"laststatus2"}]},"处置中件":{count:0,status:3},"核查中件":{count:0,status:5}},r=["环卫","执法","区12319转办","专项普查","区12345转办","巡查现场已解决","领导交办","区政府交办","信息采集监督员巡查","标准化现场督察","视频抓拍","网格化执法巡查","水务"],i=["微信平台","视频对接","市局转办","市12345转办","市12319转办","群众来访","新媒体举报"],l={0:"上报",1:"立案",2:"分派",3:"案件处置",4:"处置反馈件",5:"案件核查",6:"核查反馈件",7:"申请回退",8:"申请延期"},o={0:"green",1:"yellow",2:"red"};t["a"]={caseType:s,caseSource1:r,caseSource2:i,caseStatusObj:l,caseColors:o}},c16f:function(e,t,a){"use strict";var s,r,i=a("fa43"),l=i["a"],o=l,n=a("4023"),d=Object(n["a"])(o,s,r,!1,null,null,null);t["a"]=d.exports},d1a9:function(e,t,a){}}]);